http://localhost:8082/hosts/tests/runCtx.html?sourceCode=%7B%22plugins%22%3A%5B%22tgp%22%2C%22vscode%22%2C%22tree-shake%22%5D%2C%22libsToInit%22%3A%22utils%2Cwatchable%2Cimmutable%2CwatchableComps%2Ctgp%2CtgpTextEditor%2Cvscode%2Cjbm%2CcbHandler%2CtreeShake%22%7D&runCtx=%7B%22%24%22%3A%22runCtx%22%2C%22id%22%3A58084%2C%22path%22%3A%22tgp.completionItemsByDocProps~impl~data%22%2C%22param%22%3A%7B%22id%22%3A%22data%22%2C%22dynamic%22%3Atrue%7D%2C%22profile%22%3A%7B%22%24%22%3A%22tgp.provideCompletionItems%22%2C%22docProps%22%3A%22%25%24docProps%25%22%7D%2C%22data%22%3A%7B%22compText%22%3A%22component('createUpgradeScript'%2C%20%7B%5Cn%20%20%20%20type%3A%20'data%3C%3E'%2C%5Cn%20%20%20%20params%3A%20%5B%5Cn%20%20%20%20%20%20%20%20%7Bid%3A%20'upgrade'%2C%20type%3A%20'cmp-upgrade'%2C%20dynamic%3A%20true%20%7D%2C%5Cn%20%20%20%20%20%20%20%20%7Bid%3A%20'scriptFile'%2C%20as%3A%20'string'%2C%20defaultValue%3A%20'%5BJB_BASE%5D%2Ftemp%2Fupgrade-cmps.js'%20%7D%2C%5Cn%20%20%20%20%20%20%20%20%7Bid%3A%20'cmps'%2C%20as%3A%20'array'%2C%20defaultValue%3A%20()%20%3D%3E%20Object.keys(jb.comps)%20%7D%2C%5Cn%20%20%20%20%20%20%20%20%7Bid%3A%20'slice'%2C%20as%3A%20'number'%20%7D%2C%5Cn%20%20%20%20%5D%2C%5Cn%20%20%20%20impl%3A%20async%20(ctx%2Cupgrade%2Cfn%2Ccmps%2Cslice)%20%3D%3E%20%7B%5Cn%20%20%20%20%20%20%20%20const%20cmds%20%3D%20cmps.map(id%3D%3Eupgrade(ctx.setData(id))).filter(x%3D%3Ex%20%26%26%20x.edit%20%26%26%20!x.lostInfo).map(x%3D%3Ex.cmd)%5Cn%20%20%20%20%20%20%20%20const%20script%20%3D%20%60%23sourceCode%20%7B%20%5C%22project%5C%22%3A%20%5B%5C%22studio%5C%22%5D%2C%20%5C%22plugins%5C%22%3A%20%5B%5C%22*%5C%22%5D%20%7D%5Cn%23main%20%5CnrunActions(%5Cn%24%7Bcmds.join('%5C%5Cn')%7D%5Cn)%60%5Cn%20%20%20%20%20%20%20%20jbHost.fs.writeFileSync(jb.tgpTextEditor.fixPath(fn)%2C%20script)%5Cn%20%20%20%20%20%20%20%20return%20script%5Cn%20%20%20%20%7D%5Cn%7D)%22%2C%22compLine%22%3A63%2C%22inCompPos%22%3A%7B%22line%22%3A9%2C%22col%22%3A25%7D%2C%22shortId%22%3A%22createUpgradeScript%22%2C%22cursorLine%22%3A72%2C%22cursorCol%22%3A25%2C%22filePath%22%3A%22%2Fhome%2Fshaiby%2Fprojects%2Fjb-react%2Fplugins%2Ftgp%2Ftgp-upgrade.js%22%2C%22dsl%22%3A%22upgrade%22%7D%2C%22vars%22%3A%7B%7D%2C%22cmpCtx%22%3A%7B%22params%22%3A%7B%22docProps%22%3A%7B%22compText%22%3A%22component('createUpgradeScript'%2C%20%7B%5Cn%20%20%20%20type%3A%20'data%3C%3E'%2C%5Cn%20%20%20%20params%3A%20%5B%5Cn%20%20%20%20%20%20%20%20%7Bid%3A%20'upgrade'%2C%20type%3A%20'cmp-upgrade'%2C%20dynamic%3A%20true%20%7D%2C%5Cn%20%20%20%20%20%20%20%20%7Bid%3A%20'scriptFile'%2C%20as%3A%20'string'%2C%20defaultValue%3A%20'%5BJB_BASE%5D%2Ftemp%2Fupgrade-cmps.js'%20%7D%2C%5Cn%20%20%20%20%20%20%20%20%7Bid%3A%20'cmps'%2C%20as%3A%20'array'%2C%20defaultValue%3A%20()%20%3D%3E%20Object.keys(jb.comps)%20%7D%2C%5Cn%20%20%20%20%20%20%20%20%7Bid%3A%20'slice'%2C%20as%3A%20'number'%20%7D%2C%5Cn%20%20%20%20%5D%2C%5Cn%20%20%20%20impl%3A%20async%20(ctx%2Cupgrade%2Cfn%2Ccmps%2Cslice)%20%3D%3E%20%7B%5Cn%20%20%20%20%20%20%20%20const%20cmds%20%3D%20cmps.map(id%3D%3Eupgrade(ctx.setData(id))).filter(x%3D%3Ex%20%26%26%20x.edit%20%26%26%20!x.lostInfo).map(x%3D%3Ex.cmd)%5Cn%20%20%20%20%20%20%20%20const%20script%20%3D%20%60%23sourceCode%20%7B%20%5C%22project%5C%22%3A%20%5B%5C%22studio%5C%22%5D%2C%20%5C%22plugins%5C%22%3A%20%5B%5C%22*%5C%22%5D%20%7D%5Cn%23main%20%5CnrunActions(%5Cn%24%7Bcmds.join('%5C%5Cn')%7D%5Cn)%60%5Cn%20%20%20%20%20%20%20%20jbHost.fs.writeFileSync(jb.tgpTextEditor.fixPath(fn)%2C%20script)%5Cn%20%20%20%20%20%20%20%20return%20script%5Cn%20%20%20%20%7D%5Cn%7D)%22%2C%22compLine%22%3A63%2C%22inCompPos%22%3A%7B%22line%22%3A9%2C%22col%22%3A25%7D%2C%22shortId%22%3A%22createUpgradeScript%22%2C%22cursorLine%22%3A72%2C%22cursorCol%22%3A25%2C%22filePath%22%3A%22%2Fhome%2Fshaiby%2Fprojects%2Fjb-react%2Fplugins%2Ftgp%2Ftgp-upgrade.js%22%2C%22dsl%22%3A%22upgrade%22%7D%7D%7D%7D